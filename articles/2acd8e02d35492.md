---
title: "【Next.js 16】 run lint が失敗するようになったと思ったら、next lintが消えていただけだった話"
emoji: "🔧"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["nextjs","eslint"]
published: false
---

## はじめに

私は、Next.js 16 へアップデートした直後、急に npm lint が落ちるようになりました。
特に ESLint の設定を変えた覚えもなく、CI でも同様に失敗しました。
しかし調べていくうちに分かったのは、今回の問題は pnpm や ESLint の不具合ではなく、Next.js 16 における方針変更によるものだったということです。

本記事では、この混乱がなぜ起きたのかを整理し、
Next.js 16 時代に lint をどう捉え直せばよいのかを実体験ベースで解説します。

## 対象者

* Next.js を 16 にアップデートした方
* pnpm lint が突然失敗するようになった方
* next lint を前提に ESLint を運用してきた方
* ESLint 設定の変更に毎回振り回されがちな方

## 結論

next lint に依存していたスクリプトや設定が、Next.js 16 の方針変更と噛み合わなくなりました。
Next.js 16 では ESLint CLI を使いましょう

## 何が起きたのか

Next.js 16 では、これまで使えていた next lint が削除されました。

その結果、以下のような状態が発生します。

* package.json の lint スクリプトは残っている
* しかし内部で呼ばれていた next lint は存在しない

これにより、pnpm lint を実行するとエラーが出て、
一見すると「lint 自体が壊れた」ように見えてしまいます。

## Next.js 16 の方向性変更

Next.js 16 では、lint の実行をフレームワークが肩代わりする方針をやめています。

つまり、

* Next.js は ESLint のラッパーではなくなる
* lint は ESLint CLI を直接使う

という明確な責務分離が行われました。

これは後方互換性よりも、ツールとしての健全性を優先した判断だと感じています。

## なぜ混乱しやすいのか

混乱の原因は、見た目上の変化が少ない点にあります。

* pnpm lint というコマンド自体は変わらない
* ESLint も依存関係としては存在している
* エラーメッセージが next lint の削除を直接示さない

そのため、問題の本質に気づくまで時間がかかりがちです。

## これまでの lint 構成はどうなっていたか

Next.js 15 までの構成では、
開発者は意識しなくても next lint が内部で ESLint を実行してくれていました。

この暗黙の前提に依存した状態でアップデートすると、
Next.js 16 ではその前提が崩れます。

## これからの正しい考え方

Next.js 16 以降では、以下の考え方に切り替える必要があります。

* lint は ESLint CLI の責務
* Next.js は lint 実行に関与しない
* フレームワークにツール管理を任せない

この整理ができると、設定の見通しが一気に良くなります。

## 最小構成での移行手順

まずは以下の最小構成で問題なく動く状態を作ります。

1. package.json の lint スクリプトを eslint . に変更する
2. next.config に記述していた eslint 設定を削除する
3. eslint.config.mjs を用意する

細かなルール調整は、動作確認後に行うのがおすすめです。

## よくあるハマりポイント

* ESLint は動くが Next.js 用のルールが効かない
* any エラーが大量に出る
* ローカルでは通るが CI で落ちる

これらは多くの場合、設定の適用範囲や責務の誤解が原因です。

## おわりに

アップデート直後にエラーが出ると、不安になりがちです。

今回の pnpm lint の件も、
最初は大きな問題に見えましたが、
実際には Next.js の方針変更を理解すれば納得できる内容でした。

この記事が、同じ混乱に直面した方にとって、
一度立ち止まって整理するための助けになれば幸いです。
