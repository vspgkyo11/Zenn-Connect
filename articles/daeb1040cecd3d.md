---
title: "【VS Code×MCP×Context7】最新ドキュメントを読める AI コーディング環境構築(Next.js編)"
emoji: "📘"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["context7"]
published: false
---

# VS Code × MCP × Context7 で “最新ドキュメントを読める AI コーディング環境” を構築する方法

## はじめに

ローカルに保存した公式ドキュメントやプロジェクト固有の仕様書を AI に参照させながらコーディングできる環境は、多くのエンジニアにとって理想的な開発体験といえる。とくに Next.js のように日々アップデートが行われるフレームワークでは、公式ドキュメントを参照しながら実装することが欠かせない。一方で、ChatGPT や他の AI アシスタントは、最新の情報を必ずしも理解しているとは限らず、手元の仕様書との整合性も守れないことがある。

これらの課題を解決する鍵が MCP（Model Context Protocol）である。MCP はローカルに保存したドキュメントを AI に直接参照させる仕組みを提供し、VS Code との連携によって、まるで公式教科書とプロジェクト仕様書を横に置いた状態で AI と共同作業ができるようになる。本記事では、初心者から中級者が迷わず構築できるように、環境構築の流れを分かりやすく整理して紹介する。

## 対象者

* AI を用いた開発効率化に興味があるエンジニア
* Next.js またはモダンフロントエンドの開発者
* プロジェクト独自の仕様書を AI に理解させたい人
* VS Code をメインエディタとして利用している人
* MCP や Context7 を初めて触る人

## AI が最新ドキュメントを読むことの重要性

フレームワークの更新が早い現代では、オンライン上の情報が古いケースも多い。とくに Next.js や React まわりは毎年のように API やベストプラクティスが変わるため、ドキュメントを常に参照し続けることが欠かせない。

しかし、AI によるコード生成には次の課題がある。

* ドキュメントの変更に追従しない誤情報が返ってくる
* プロジェクト特有の命名規則や仕様を理解できない
* 参照したいローカルドキュメントを AI が読めない

そこで MCP と Context7 を組み合わせることで、AI が手元の最新ドキュメントを参照できるようになり、開発者の手間を大幅に軽減できる。

## MCP が解決する課題

MCP（Model Context Protocol）は、AI にローカル環境の情報を提供するための新しい標準である。MCP サーバーを VS Code に接続することで、AI はローカルのファイルを安全に参照できるようになり、コード補完や解説の精度が大きく向上する。

MCP を導入することで解決できる問題は次の通り。

* ローカルドキュメントの直接参照
* API 仕様書や DB schema の整合性を維持したコード生成
* Next.js 公式ドキュメントを前提にした回答の安定化
* プロジェクト固有のルールに合わせたアドバイス

## 本記事で実現するゴール

* VS Code に MCP 拡張を導入する
* Context7 を利用してローカルドキュメントを AI に読ませる
* Next.js プロジェクトで活用できる環境構築の全体像を理解する

本記事（1本目）は、特に構築フェーズにフォーカスし、実践的な Next.js 例やコード生成の具体例は2本目の記事で詳しく紹介する。

## MCP と VS Code の接続方法

### MCP 拡張のインストール手順

VS Code には MCP に対応した拡張機能が提供されている。拡張を導入することで、AI はローカルの MCP サーバーと通信できるようになる。

手順の流れは次の通り。

1. VS Code の拡張画面を開く
2. MCP 関連の拡張を検索する
3. インストールして有効化する

インストール後、設定パネルで MCP サーバーのパスを登録することで AI との連携が可能になる。

### MCP サーバーのローカル起動

MCP サーバーは、ローカルファイルの読み取りや API 連携を担当する。Next.js プロジェクトの docs や schema などを参照させるためには、ローカルで MCP サーバーを起動しておく必要がある。

一般的には次のような構成で起動する。

* ローカルプロジェクト内にサーバー設定ファイルを配置
* npm run コマンドや Python スクリプトで起動
* VS Code の MCP 拡張から自動認識させる

Context7 を利用すると、この MCP サーバー管理が簡単になるため、多くのエンジニアにとって導入しやすい。

## Context7 によるローカル資料の同期

Context7 はローカルのドキュメントを AI に安全かつ効率的に同期するツールである。特に次のようなディレクトリ構成があるプロジェクトで効果を発揮する。

* docs フォルダ
* API 仕様書
* ER 図や schema
* Next.js の pages や app **以下のコード**

Context7 の watcher 機能を使うことで、ドキュメントの更新がそのまま AI の参照内容に反映される。

### 代表的な同期対象

* Next.js 公式ドキュメントのローカルコピー
* プロジェクト用 API 仕様書（OpenAPI 形式など）
* DB schema ファイル（Prisma schema など）
* Markdown ベースの内部資料

これにより、AI は公式ドキュメントとプロジェクト仕様書の両方を参照しながら、コード生成や改善提案を行ってくれる。

## 公式ドキュメント読み込み前提の AI コーディングとは

従来の AI は、あくまで学習済みデータを前提に回答を行うため、最新情報との乖離が生じることがある。一方で MCP と Context7 を組み合わせることで、AI が次のような動作を行えるようになる。

* Next.js 最新 API の正しい使い方を参照
* route handler, metadata, server actions の最新仕様に対応
* プロジェクト固有の命名ルールを踏まえたコード提案
* docs の内容と矛盾しないアーキテクチャ提案

これにより、まるで AI が横で公式教科書を開きながら指導してくれるような開発体験が実現する。

## フレームワーク公式ドキュメントを AI に参照させる手順

Next.js のようなフレームワーク公式ドキュメントを AI に参照させるには、ローカルへの保存と Context7 側での同期設定が必要になる。ここでは Next.js を例に、具体的な手順を整理する。

1. 参照したい公式ドキュメント範囲を決める  
   - app router, route handler, metadata, server actions など、実際の開発でよく使うトピックを優先する  
   - すべてを保存しようとせず、「よく使う基本機能」「今のプロジェクトで使う機能」に絞ると管理がしやすい  

2. ドキュメントをローカルに保存する  
   - ブラウザで Next.js の公式サイトを開き、必要なページごとに Markdown や HTML として保存する  
   - 単純にコピーペーストして .md ファイルに貼り付ける方法でもよい  
   - 例  
     - docs/nextjs/app-router.md  
     - docs/nextjs/route-handlers.md  
     - docs/nextjs/server-components.md  

3. プロジェクト内に docs ディレクトリを用意する  
   - Next.js プロジェクト直下に docs ディレクトリを作成する  
   - フレームワーク別、用途別にサブディレクトリを分けると参照しやすい  
   - 例  
     - docs/nextjs/  
     - docs/project/  
     - docs/design/  

4. ファイル名と構成を分かりやすくする  
   - ファイル名にトピック名を含めると、後から「どのドキュメントを参照しているか」が一目で分かる  
   - 例  
     - app-router-basics.md  
     - route-handlers-api-rules.md  
   - 同じトピックでバージョンが変わる場合は v14, v15 のようにバージョンを明記する  

5. Context7 の同期対象に docs ディレクトリを追加する  
   - Context7 の設定画面で watcher の対象パスに docs ディレクトリを指定する  
   - 例  
     - ./docs/nextjs  
     - ./docs/project  
   - これにより、docs 配下のファイル更新が自動的に AI の参照コンテキストに反映される  

6. AI に「どのドキュメントを参照してほしいか」を明示する  
   - 実際にプロンプトを書くときは、参照してほしいファイルを文中で指定する  
   - 例  
     - docs/nextjs/route-handlers.md を前提に、users 一覧の route handler を作成してください  
     - docs/nextjs/app-router.md と docs/project/api-design.md を参照して、/projects の API を設計してください  
   - こうすることで、AI はローカルの公式ドキュメントを優先して回答してくれるようになる  

この手順を一度整えておくと、フレームワークがアップデートされたときも、必要なページだけを差し替えればよい。日々の開発では「新しい仕様を docs に落とし込む → AI にも即座に反映される」という循環がつくれるようになる。

## おわりに

AI にローカルドキュメントを参照させながら開発できる環境は、これからのソフトウェア開発において標準的なスタイルになっていくと思う。とくに Next.js のように急速に進化するフレームワークでは、公式情報を常に参照できる環境は大きな安心材料になる。

自分自身、この環境を整えてからは、ドキュメントを行ったり来たりする手間が減り、開発の集中力を途切れさせることもなくなった。まるで隣に詳しいメンターが座ってくれているような感覚で、コードを書く時間そのものが楽しくなった。

次の記事では、この環境を Next.js プロジェクトでどのように活用するか、具体的な手順と実践例を紹介する予定である。ローカル資料を読み込む AI コーディングの魅力を、ぜひ体験してもらいたい。

---
# VS Code × MCP × Context7 実践編：Next.js と Laravel プロジェクトで AI がドキュメントを参照しながら開発する方法

## はじめに

AI がローカルドキュメントを理解した状態でコード生成やレビューを行うと、開発効率と品質が大きく向上します。本記事では、実際のプロジェクト（Next.js / Laravel）を例にしながら、Context7 と MCP を使って AI が仕様書・DB スキーマ・ルーティング情報などを参照しながら開発できる環境をどのように使いこなすかを解説します。

前編では環境構築手順を扱いましたが、本記事では「実際にどのように使うか」を具体的なワークフローで紹介します。

---

## Next.js（App Router）プロジェクトでの活用

Next.js は App Router、Server Components、Prisma のように複数の概念が絡み合うため、AI に正確な情報を与えるほど効果が高まります。

### 読ませるべきドキュメント

次のようなファイルを Context7 に読み込ませると AI が正確に参照できます。

* prisma/schema.prisma
* app/api/**
* app/(routes)/ or domain/**
* README や API 仕様書

これらは API 設計やデータ構造の理解に不可欠なため、コード提案の品質向上に直結します。

### 利用例（API ハンドラ生成）

AI に次のように依頼できます。

* schema.prisma から該当モデルのフィールド情報を把握
* 既存の API 設計に合わせたハンドラを生成
* app/api/** 内のフォルダ構成にあわせて適切なファイルパスを提案

### 利用例（テストコード生成）

Next.js では Playwright や Vitest を併用するケースが多くあります。Context7 によって AI が既存コード構造・仕様書を理解した状態になるため、より高精度なテストが生成できます。

---

## Laravel プロジェクトでの活用

Laravel は Model、Migration、Controller、Request が明確な構造で連動するため、AI にディレクトリ全体を理解させることで一貫性のあるコード提案が可能になります。

### 読ませるべき資料

* routes/web.php, routes/api.php
* app/Models/**
* app/Http/Controllers/**
* app/Http/Requests/**
* database/migrations/**

Laravel の場合、FormRequest のバリデーション仕様や Model のリレーション定義がコード品質の要となるため、AI がこれらを参照できる環境は特に有効です。

### 利用例（FormRequest 生成）

AI に次のような依頼ができます。

* Migration や Model の構造を自動読解
* 既存の命名規則に沿った FormRequest を生成
* 設計資料に基づき追加のバリデーションルールを提案

### 利用例（Seeder / Factory 自動生成）

Migration と Model を参照したうえで、Factory や Seeder を自動生成させることも可能です。

---

## プロジェクト全体の整合性チェック

Context7 により設計書とコードが AI の参照対象になるため、次のような整合性チェックができます。

* 設計書に記載されていない API の検出
* Route に存在してコード側に未実装の処理の発見
* Prisma schema と実コードの型不一致
* Laravel の FormRequest と Controller で扱うパラメータの差異

大規模プロジェクトほど差分確認の負担が大きいため、AI による補助が大きく効いてきます。

---

## テストコード生成への応用

Next.js では Playwright や Vitest、Laravel では Feature / Unit テストを対象とした生成が効果的です。

AI が仕様書や API 設計を把握している状態で生成されるため、テストの前提条件や期待される戻り値といった「テストの根拠」が明確になります。

### 活用ポイント

* 複雑な API 検証ロジックの自動生成
* 既存のテストコードとの一貫性維持
* Prisma や Model に依存したテストデータの自動構築

---

## ハマりやすいポイントと対処法

AI をドキュメント参照モードで使う際によくある問題点と対処法をまとめます。

### JSON-RPC エラー

多くの場合、設定ファイルのパス誤りや JSON の構文ミスが原因です。

### ポート競合

別の MCP サーバーが同じポートで起動している可能性があります。プロセス確認とポート変更で解消できます。

### watcher が動作しない

VS Code のワークスペース設定により無効化されるケースがあります。個別フォルダごとの設定を確認すると改善します。

### 巨大ディレクトリを読み込んでしまう

node_modules、vendor、storage などを除外設定することが重要です。

---

## セキュリティ面の考え方

Context7 や MCP はローカルファイルを外部へ直接送信しません。必要な部分のみを抽出して AI へ渡す方式のため、機密データが含まれる企業環境での活用にも現実的です。

また、参照対象を限定することで情報漏えいリスクをさらに抑えることができます。

---

## おわりに

AI がローカルドキュメントを参照できるようになると、開発フローが大きく変化します。設計書、Migration、Schema、Route、Controller がすべて AI の文脈に入り、プロジェクト単位で整合性の取れたアドバイスやコード生成が可能になるためです。

筆者が Next.js と Laravel プロジェクトで実践した中で特に印象的だったのは、"AI がプロジェクト設計の意図を理解してくれている安心感" でした。依存関係や設計思想を踏まえた提案が返ってくるため、レビューの前段階が大きく効率化されます。

まずは小規模なプロジェクトからでも構いません。Context7 と MCP の組み合わせを試してみてください。開発体験が一段階進化するはずです。
