---
title: "[Windows]RufusでLive USBを作る手順と diskpartで通常USBに戻す方法"
emoji: "💽"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Windows","Rufus","diskpart","LiveUSB","Linux"]
published: true
---
---

## はじめに
Windows 10のサポート終了が近づくなか、USBメモリでLive USBを作成しておきたい人も多いはずです。また、WindowsでLinuxなどのISOイメージから起動用USBを作成したあと、そのUSBメモリを通常のストレージ用途へ戻したい場面は少なくありません。さらに、USBメモリは「フォーマット」だけでは元に戻らないことがあります。本記事では、Rufusを使ったLive USBの作成手順と、diskpartで通常のUSBに戻す手順をまとめます。

## 対象者

* Windows 10 または 11 で起動用USBを作成したい人
* 作成済みのLive USBを通常のUSBストレージに戻したい人
* 古いUSBメモリが突然認識されないなどリセットしたい人


## 前提

### 用語

* Live USB
  * OSをUSBから直接起動してインストールに用いる仕組み

* ISOイメージ
  * インストールメディアを1ファイルにしたディスクイメージ

* UEFIとBIOS互換
  * 近年のPCはUEFIでの起動が主流。一部の古いPCではBIOS互換モードが必要

* MBRとGPT
  * USBのパーティション方式。古い機器ではMBRが無難。UEFI専用ならGPTで問題ないことが多い


### 事前準備

* 管理者権限のWindows 10 あるいは 11
* 作成したいOSのISOファイル（公式サイトからダウンロード）
* 8GB以上のUSBメモリ（推奨）※USB3.0が望ましい。USB2.0だと認識されない場合がある
* [Rufus](https://rufus.ie/ja/) 最新版の実行ファイル


### チェックリスト

* 外付けHDDやSDカードなど、不要なリムーバブルメディアは一時的に取り外す
* ノートPCはAC電源に接続し、スリープを一時的に無効化する
* 管理者権限のコマンドプロンプトで作業する
* diskpartではlist diskの直後にdetail diskを実行し、型番や容量で対象USBであることを確認してからcleanを実行する
* 重要なデータは事前に必ず退避する。作業後はエクスプローラーとディスクの管理で容量とファイルシステムを確認する
* UEFI設定を変更した場合は、作業後に元の設定へ戻す。特にSecure Bootを無効化した場合は再有効化を確認する
* 作業完了後はハードウェアの安全な取り外しを行う


### 注意事項

* ここで扱う操作はUSBメモリ上のデータを消去します。重要なデータは必ず退避してください
* diskpartの操作は選択したディスクを消去します。実行前に対象ディスク番号を必ず確認してください
* 企業端末などセキュリティポリシーのある環境では事前に管理者に確認してください

## 手順

### 手順1 Live USB 作り方 Rufusで作成する

迷ったら次の既定値で作成すれば動くことが多い

* パーティション構成 MBR
* ターゲットシステム BIOSまたはUEFI
* ファイルシステム 既定値のまま

必要に応じて後述のUEFI専用構成やFAT32制限を参照する

1. USBメモリをPCに挿入する
2. Rufusを起動し、デバイス欄で対象USBを選ぶ
3. ブートの種類でISOファイルを選択し、目的のISOを指定する
4. パーティション構成の初期値を確認し、必要に応じて切り替える

   * UEFI専用機ならGPT
   * レガシーBIOS互換が必要ならMBR
5. ファイルシステムは既定のままでよい

   * UEFI起動の多くはFAT32が選ばれる
6. 開始を押し、警告を確認したら続行する
7. 完了表示を待つ

:::message
**補足**

* 一部のISOは「ISOHybrid」形式で、USBでもCDでも起動できるよう加工されている
* セキュアブートが有効なPCでは、配布元が対応していないと起動できないことがある
:::

### 手順2 diskpart 初期化 手順 通常USBに戻す

Windowsのエクスプローラーからの「フォーマット」で容量が正しく戻らないときは、diskpartでパーティション構成を作り直します

1. 管理者としてコマンドプロンプトを開く
2. 以下を順に実行する

```bat
> diskpart
DISKPART> list disk
DISKPART> select disk X   \ ここでXはUSBのディスク番号
DISKPART> detail disk     \ ベンダ名やサイズでUSBであることを再確認
DISKPART> clean           \ 既存のパーティション情報を完全消去
DISKPART> convert mbr     \ 迷ったらMBRにしておくと互換性が高い
DISKPART> create partition primary
DISKPART> format fs=fat32 quick  \ 大容量ファイルを扱うならexfatでも良い
DISKPART> assign
DISKPART> exit
```

これでエクスプローラーから通常のUSBメモリとして扱えるようになります。
上記で復旧しない場合は、以下の補足やUSBポート変更、別PCでの実行も試してみてください。

:::message
**補足**
通常のUSBメモリとして認識されない場合は
Rufus を用いて、以下を手順を実施してみることをお勧めします。

1. 『デバイス』：フォーマットしたいUSBメモリに変更する。
2. 『ブートの種類』：「非ブート用」にする。
3. 『クイックフォーマット』：チェックを入れる。
4. 『機能拡張されたラベルとアイコンファイルを作成』：チェックを外す。
   (チェックを入れたままだとドライブにRufusのアイコンを表示するためのファイルが作成される)
5. 『スタート』をクリックする。
:::

### 作業後の確認

* エクスプローラーで容量とファイルシステムを確認
* ディスクの管理で未割り当て領域が残っていないか確認
* 安全な取り外しを実施し、別PCでも認識を確認

## 対処法

* USBが認識されない
  * 物理的な接触不良を疑い、別ポートや別PCで試す
  * 古いUSB 2.0メモリは相性問題が出ることがある。USB 3.0メモリを推奨。別PCやメディアで原因を切り分ける

* 容量が小さく表示される
  * パーティションが複数に分かれている可能性がある。diskpartのlist partitionで確認し、cleanを実行し直す

* フォーマットに失敗する
  * 別のファイルシステムを試す。FAT32でだめならexfatで高速フォーマットを行い、必要ならその後FAT32に変更する

* UEFIで起動しない
  * セキュアブートを一時的に無効化して切り分ける。設定は起動メニューから変更し、作業後は元に戻す

* Windows 10のPCでUbuntuのLive USBを作りたい
  * Rufusのパーティション構成をGPT、ターゲットシステムをUEFIにする
  * 作成後、起動順をUSB優先に設定しブートする

* Live USBを通常USBへ戻したが4GB以上のファイルが入らない
  * FAT32は1ファイル4GB制限がある。大きなファイルを扱うならexfatでフォーマットし直す


## おわりに

私自身、古いUSBメモリが突然認識されなくなったり、容量が極端に小さく見える状態に悩まされましたが、今回のRufusでの作成とdiskpartでの手順で復旧できるようになりました。原因はLive USB特有のパーティション構成でした。この記事が同じ悩みを抱える方の安心につながればうれしいです。

---

## 株式会社ONE WEDGE
【Serverlessで世の中をもっと楽しく】
ONE WEDGEはServerlessシステム開発を中核技術としてWeb系システム開発、AWS/GCPを利用した業務システム・サービス開発、PWAを用いたモバイル開発、Alexaスキル開発など、元気と技術力を武器にお客様に真摯に向き合う価値創造企業です。
https://onewedge.co.jp/
