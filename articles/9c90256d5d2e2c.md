---
title: " 【Prisma 7】package.json#prisma 非推奨警告の正体と prisma.config.ts 移行ガイド"
emoji: "⚠️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["nextjs","prisma"]
published: true
---

## はじめに

Prisma をアップデートした直後、prisma が非推奨となる旨の警告が表示されるようになりました。この警告は、ローカルでは問題なく動作している中でビルドログ等で初めて気づくケースも多いです。この記事では、この警告が示している意味と、修正対応する手順をご紹介します。

## 対象者

* Prisma 6 系から 7 系への移行を検討している人
* package.json の prisma 設定を使ってきた人
* Next.js と Prisma を組み合わせて使っている人

## 警告の意味

Prisma をアップデートした直後、以下のような警告が表示されるようになりました。

```
warn The configuration property `package.json#prisma` is deprecated and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., `prisma.config.ts`).
```

この警告は、今すぐエラーになることを示しているわけではありません。
意味しているのは次の2点です。

* package.json に書く prisma 設定は非推奨になった
* 将来の Prisma 7 以降で完全に削除される予定である

つまり、今は動くが将来は確実に動かなくなるという状態です。
Prisma は設定情報とスキーマ定義の責務を分離する方針に移行しており、その一環として設定専用ファイルである prisma.config.ts が導入されました。

## Prisma 7 で導入された prisma.config.ts とは

prisma.config.ts は、Prisma CLI が参照する設定専用ファイルです。
schema.prisma がデータモデルの定義に専念するのに対し、こちらは次のような情報を扱います。
TypeScript ファイルとして定義されているため、型補完が効き、設定の意図も明確になります。

* schema ファイルのパス
* seed の実行方法
* 将来的な拡張設定

## 移行手順

ここでは、実際のファイル名とコード例を用いて移行手順を説明します。
大まかな流れは以下の通りです。

1. package.json から prisma 設定を削除する
2. prisma.config.ts を作成する
3. prisma.config.ts に設定を移す

### 1. package.json から prisma 設定を削除する

まず、package.json に定義されている prisma セクションを削除します。

```diff:package.json
{
  // prisma セクションは削除
-  "prisma": {
-    "schema": "prisma/schema.prisma",
-    "seed": "tsx prisma/seed.ts"
-  }
}
```

### 2. prisma.config.ts を作成する

次に、プロジェクトのルートディレクトリに prisma.config.ts を作成します。
ファイル構成のイメージです。

```
project-root/
├─ prisma/
│  ├─ schema.prisma
│  └─ seed.ts
├─ prisma.config.ts
└─ package.json
```

### 3. prisma.config.ts に設定を移す

package.json に書いていた設定を、そのまま prisma.config.ts に移します。

```typescript:prisma.config.ts
import { defineConfig } from "prisma/config";

export default defineConfig({
  schema: "prisma/schema.prisma",
  seed: "tsx prisma/seed.ts",
});
```

以上で設定の移行は完了です。

## おわりに

私もビルドログに出た警告を見て一瞬不安になりました。しかし、調べてみると設定ファイルの置き場所を変えるだけで、非推奨警告は解消されます。このように、今のうちに対応しておくことで技術的負債を一つ減らせます。この記事が、同じ警告に出会った人の安心材料になれば幸いです。

---

## 株式会社ONE WEDGE
【Serverlessで世の中をもっと楽しく】
ONE WEDGEはServerlessシステム開発を中核技術としてWeb系システム開発、AWS/GCPを利用した業務システム・サービス開発、PWAを用いたモバイル開発、Alexaスキル開発など、元気と技術力を武器にお客様に真摯に向き合う価値創造企業です。
https://onewedge.co.jp/
