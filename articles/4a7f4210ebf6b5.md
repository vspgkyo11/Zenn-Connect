---
title: "[LaravelÃ—Dropzone.js]ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¯¾å¿œã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’æ§‹ç¯‰ã™ã‚‹"
emoji: "ğŸ“¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["laravel"]
published: false
---
#  ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’ä¾¿åˆ©ã«ï¼ã€Laravelã§ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¯¾å¿œã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’æ§‹ç¯‰

Laravelã®æ©Ÿèƒ½ã‚’æœ€å¤§é™ã«æ´»ç”¨ã—ã€Dropzone.jsã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¯¾å¿œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ã“ã‚Œã‚‰ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®æ­£ç¢ºãªã‚¹ãƒ†ãƒƒãƒ—ã‚’è©³ç´°ã«è§£èª¬ã—ã¾ã™ã€‚

---

## é–‹ç™ºç’°å¢ƒ

ä»¥ä¸‹ã®é–‹ç™ºç’°å¢ƒã‚’ä½¿ç”¨ã—ã¾ã—ãŸï¼š

- **OS**: Windows 11
- **Web Server**: XAMPP v3.3
- **PHP**: 8.2.12
- **Laravel Framework**: 11.40.0

---

## ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

- Laravelã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹
- Dropzone.jsã§ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã§ãã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªUIã‚’æ§‹ç¯‰ã™ã‚‹
- Tailwind CSSã§ãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å®Ÿç¾

---

## Laravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹ç¯‰

1. Laravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–°è¦ä½œæˆ

    ```bash
    composer create-project laravel/laravel drag-drop-upload
    cd drag-drop-upload
    php artisan serve
    ```

2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ

    ```bash
    php artisan make:migration create_files_table --create=files
    ```

    æ§‹é€ ã‚’æ¬¡ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ï¼š

    ```php
    public function up()
    {
        Schema::create('files', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('path');
            $table->timestamps();
        });
    }
    ```

3. ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

    ```bash
    php artisan migrate
    ```

4. ãƒ«ãƒ¼ãƒˆã®è¨­å®š

    `routes/web.php`ã«æ¬¡ã‚’è¿½åŠ ã—ã¾ã™ï¼š

    ```php
    use Illuminate\Support\Facades\Route;
    use App\Http\Controllers\FileUploadController;

    Route::get('/', function () {
        return view('welcome');
    });

    Route::get('/upload', function(){
        return view('upload');
    });

    Route::post('/upload', [FileUploadController::class, 'store']);
    ```

5. ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®å®Ÿè£…

    `FileUploadController.php`ã«æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ï¼š

    ```php
    <?php
    namespace App\Http\Controllers;

    use Illuminate\Http\Request;
    use Illuminate\Support\Facades\Storage;

    class FileUploadController extends Controller
    {
        public function store(Request $request)
        {
            if ($request->hasFile('file')) {
                $file = $request->file('file');
                $filename = time() . '_' . $file->getClientOriginalName();
                $path = $file->storeAs('uploads', $filename, 'public');

                return response()->json([
                    'success' => true,
                    'file_path' => $path,
                    'file_name' => $filename
                ]);
            }

            return response()->json(['success' => false], 400);
        }
    }
    ```

---

## UIã®æ§‹ç¯‰

`resources/views/upload.blade.php`ã«æ¬¡ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼š

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Dropzone.js ã® CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.css">
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="w-full max-w-lg p-6 bg-white rounded-lg shadow-md">
        <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h1>
        <form action="/upload" class="dropzone border-2 border-dashed border-blue-500 rounded-lg bg-gray-50 p-6 text-center" id="file-dropzone">
            @csrf
            <p class="text-gray-600">ã“ã“ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã™ã‚‹ã‹ã€ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠã—ã¦ãã ã•ã„</p>
        </form>
    </div>

    <!-- Dropzone.js ã® JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.js"></script>
    <script>
        Dropzone.options.fileDropzone = {
            maxFilesize: 2, // MB
            acceptedFiles: ".jpeg,.jpg,.png,.gif",
            dictDefaultMessage: "ã“ã“ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦ãã ã•ã„",
            success: function(file, response) {
                console.log(response);
                alert("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒæˆåŠŸã—ã¾ã—ãŸ: " + response.file_name);
            },
            error: function(file, response) {
                alert("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ");
            }
        };
    </script>
</body>
</html>
```

---

## çµè«–

Laravelã¨Dropzone.jsã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¿œå¾©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ã€‚Tailwind CSSã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è§¦ã‚Šã‚„ã™ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¢ãƒ€ãƒ³ãªUIã¨é«˜æ©Ÿèƒ½ãªãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚’ä¸€ç·’ã«å®Ÿç¾ã§ãã¾ã™ã€‚

